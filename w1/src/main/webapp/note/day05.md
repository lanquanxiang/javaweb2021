# 1. Filter过滤器
## 1.概念
1. 本质上是Java文件（*.java）
2. 实现了Filter接口
## 2. 体系结构（面试）
1. Tomcat8.0 直接实现Filter接口，并且实现doFilter方法来执行过滤
2. Tomcat9.0 继承HttpFilter类（继承了GenericFilter，实现了Filter接口）--增加了专门用于处理HTTP请求和响应的doFilter方法
3. 选择：
	1. Tomcat9.0的程序（继承）不兼容，只兼容（实现）
	2. 过滤器已经继承了其他类，只能实现Filter接口（java不支持多继承，避免菱形继承问题产生）
	3. 过滤器只需要处理HTTP的请求和响应，选择继承（因为继承HttpServletRequest、response 不需要进行类型转换，减少代码）
	4. 如果希望过滤器能够处理的范围更大、更灵活，选择实现接口
## 3. 作用
1. 能够在请求到达目标资源之前对request【更多】、response进行处理
	1. 能够获得请求头和请求行信息---设置黑名单、白名单、防盗链
	2. 能够获得请求参数的值---提前检测参数值是否合法、符合要求
	3. 能够重置请求参数的编码---统一网站编码【重点：考试】
	4. 能够读取cookie --- 自动登录
2. 决定是否放行（是否能够继续访问目标资源）
	1. 放行```chain.doFilter(request, response);super.doFilter(req, res, chain);```
	2. 去其他路径（重定向（√）、请求转发）
3. 能够在响应到达客户端之前对response进行处理
	1. 设置头信息----禁止某一类文件缓存【重要】
	2. 设置头信息----【开发】允许跨域请求
	3. 写入cookie---向客户端写入某些信息
## 4. 创建和配置
1. 路径配置
	1. 所有文件 /*
	2. 某一个类文件  eg.所有jsp文件 *.jsp
	3. 某个文件夹下的所有文件  eg.过滤note下的所有文件 /note/*
	4. 某个文件 eg.过滤个人信息页面 /userinfo.jsp
2. 过滤器的配置
	1. 注解 @WebFilter(urlPatterns = {"/*","其他路径","其他路径"})
	2. web.xml配置
3. 过滤链的装配规则【简答题】
	1. 优选组装web.xml中的过滤器，然后组装注解的过滤器
	2. 多个配置的过滤器，按照配置的先后顺序组装
	3. 多个注解的过滤器，按照类名的先后顺序组装
## 5. 实践
1. 统一网站编码
2. 未登录拦截
3. 允许跨域、禁止缓存


# 2. listener监听器
## 1. 概念
1. 本质上Java文件（*.java）
2. 实现了特定的接口
## 2. 作用
1. 监听域对象的创建（created）和销毁（destroy）   XXXListener
2. 监听域对象中属性的修改（增加add、删除remove、修改replace）XXXAttributeListener
3. 监听特定对象（JavaBean）是否从session域中绑定/解绑【了解】 
	说明：需要JavaBean去实现接口，可以使用第二组接口代替
## 3. 实践
1. 监听域对象的创建和销毁---统计网站访问量
	监听到session被创建，访问量+1
